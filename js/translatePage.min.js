import DataBase from"./translations.min.js";let languageBlock,pageContent;const changeLanguage=e=>{e.preventDefault();const t=e.target;if(t.dataset.lang&&!t.classList.contains("language__active")){const e=checkLocalStorage(t.dataset.lang);changeHTMLattr(e),changePageText(e),changeActiveLangBtn()}};function createBtns(e){const t=document.createElement("div");t.innerHTML='<button data-lang="en" type="button" class="language__active">EN</button>\n    /\n    <button data-lang="ru" type="button">RU</button>',t.className="menu__changelng",document.querySelector(e).append(t),languageBlock=t}function changeHTMLattr(e){document.documentElement.lang=e}function changePageText(e){const t=DataBase[e];pageContent.forEach((e=>{e.innerHTML=t[e.dataset.dbindex]}))}function changeActiveLangBtn(){[...languageBlock.children].forEach((e=>{e.classList.remove("language__active")})),languageBlock.querySelector(`[data-lang=${checkLocalStorage()}]`).classList.add("language__active")}function checkLocalStorage(e){return localStorage.getItem("PrideByte_CV_lang")||localStorage.setItem("PrideByte_CV_lang","en"),e&&localStorage.setItem("PrideByte_CV_lang",e),localStorage.getItem("PrideByte_CV_lang")}function init(e){const t=Object.entries(DataBase.en),a=["BR","EM","STRONG","B","I","A"];pageContent=[...document.querySelectorAll("body *")].filter((e=>{for(let t=0;t<e.children.length;t++)if(!a.includes(e.children[t].nodeName))return!1;return""!==e.innerText&&"SCRIPT"!==e.nodeName})).filter((e=>{for(let a=0;a<t.length;a++){let[n,c]=t[a];if(e.innerHTML===c)return e.dataset.dbindex=n,!0}return!1})),createBtns(e);let n=checkLocalStorage();"en"!==n&&(changeHTMLattr(n),changePageText(n),changeActiveLangBtn()),languageBlock.addEventListener("click",changeLanguage)}export default init;